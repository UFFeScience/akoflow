{{define "connector_workflows.js"}}

<script>

    function connectorWorkflows() {
        return {
            getWorkflows: async () => {
                try {
                    const response = await fetch(BASE_URL_API + "workflows");
                    if (!response.ok) {
                        console.error("Failed to fetch workflows:", response.status, await response.text());
                        return { data: [] };
                    }
                    const data = await response.json();
                    return data;
                } catch (error) {
                    console.error("Error fetching workflows:", error);
                    return { data: [] }; 

                }
            },
            getWorkflowDetails: async (workflowId) => {
                const response = await fetch(`/api/v1/workflows/${workflowId}`);
                if (!response.ok) {
                    throw new Error('Network response was not ok');
                }
                return await response.json();
            },

            createWorkflow: async (workflowData) => {
                const response = await fetch(BASE_URL_API + "workflows/", {
                    method: 'POST',
                    headers: {
                        'Content-Type': 'application/json'
                    },  
                    body: JSON.stringify(workflowData)
                });
                if (!response.ok) {
                    throw new Error('Failed to create workflow: ' + response.statusText);
                }
                return await response.json();
            },
            

        };
    }


</script>
{{end}}